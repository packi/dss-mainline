<html>
  <head>
    <title>digitalStrom - Demo - Apartment Hierarchie</title>
	<script src="js/lib/prototype/prototype.js" language="JavaScript" type="text/javascript"></script>
	<script src="js/model.js" language="JavaScript" type="text/javascript"></script>
	<link rel="stylesheet" type="text/css" href="main.css"/>
	<script type="text/javascript" language="JavaScript">

function loadApartmentStructure() {
  var list = new Element('ul');
  $("structureContainer").appendChild(list);

  apartment = new Apartment();
  apartment.fetch();

  apartment.zones.each(
    function (zone) {
      if (zone.id == 0) {
        return;
      }
      var item = new Element('li');
      list.appendChild(item);
      item.appendChild(new Element('p', {'title' : zone.id}).update(zone.name));
      var devicelist = new Element('ul');
      item.appendChild(devicelist);

      zone.devices.each(
        function (device) {
          if (device.id == 0) {
            return;
          }
          devicelist.appendChild(new Element('li', {'title' : device.dsid}).update(device.name));
        }
      );
    }
  );
}

function doOnload() {
  loadApartmentStructure();
}

</script>
  </head>
  <body onload="doOnload()">
    <h1>digitalStrom - Demo - Apartment Hierarchie</h1>
    <div class="container" id="structureContainer" />
  </body>	
</html>
