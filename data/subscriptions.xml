<?xml version="1.0"?>
<subscriptions version="1">

  <!-- EMail event handling --> 
  <subscription event-name="sendmail" handler-name="sendmail">
  </subscription>

  <!-- Standard events -->
<!--
  <subscription event-name="callScene" handler-name="raise_event">
    <parameter>
      <parameter name="event_name">bell</parameter>
    </parameter>
    <filter match="all">
      <property-filter type="matches" value="41" property="sceneID" />
    </filter>
  </subscription>
  <subscription event-name="callScene" handler-name="raise_event">
    <parameter>
      <parameter name="event_name">alarm</parameter>
    </parameter>
    <filter match="all">
      <property-filter type="matches" value="42" property="sceneID" />
    </filter>
  </subscription>
  <subscription event-name="callScene" handler-name="raise_event">
    <parameter>
      <parameter name="event_name">panic</parameter>
    </parameter>
    <filter match="all">
      <property-filter type="matches" value="43" property="sceneID" />
    </filter>
  </subscription>
-->

  <!-- Examples -->
<!--
  <subscription event-name="call" handler-name="raise_event">
    <parameter>
      <parameter name="event_name">sendBell</parameter>
    </parameter>
    <filter match="all">
      <property-filter type="matches" value="0123456789" property="source" />
    </filter>
  </subscription>

  <subscription event-name="sendBell" handler-name="bus_handler">
    <send type="callScene">
      <parameter name="scene">14</parameter>
    </send>
    <parameter>
      <parameter name="location">.fid(4136)</parameter>
    </parameter>    
  </subscription>
-->

  <!-- Sunrise/Sunset calculation script -->
  <subscription event-name="running" handler-name="javascript">
    <parameter>
      <parameter name="filename1">/usr/share/dss/data/solar_computer.js</parameter>
      <parameter name="script_id">solar_computer</parameter>
    </parameter>
  </subscription>
  <subscription event-name="solar_computer.update" handler-name="javascript">
    <parameter>
      <parameter name="filename1">/usr/share/dss/data/solar_computer.js</parameter>
      <parameter name="script_id">solar_computer</parameter>
    </parameter>
  </subscription>

  <!-- System State Handler -->
  <subscription event-name="model_ready" handler-name="javascript">
    <parameter>
      <parameter name="filename1">/usr/share/dss/data/system_state.js</parameter>
      <parameter name="script_id">system_state</parameter>
    </parameter>
  </subscription>
  <subscription event-name="callScene" handler-name="javascript">
    <parameter>
      <parameter name="filename1">/usr/share/dss/data/system_state.js</parameter>
      <parameter name="script_id">system_state</parameter>
    </parameter>
  </subscription>
  <subscription event-name="undoScene" handler-name="javascript">
    <parameter>
      <parameter name="filename1">/usr/share/dss/data/system_state.js</parameter>
      <parameter name="script_id">system_state</parameter>
    </parameter>
  </subscription>

  <!-- State Definitions -->
  <state name="presence">
    <property name="value" type="string"></property>
    <property name="persistent" type="boolean">true</property>
    <property name="valuerange">
        <property name="absent" type="string">absent</property>
        <property name="present" type="string">present</property>
    </property>
    <property name="script_id" type="string">system_state</property>
  </state>

  <state name="panic">
    <property name="value" type="string"></property>
    <property name="persistent" type="boolean">true</property>
    <property name="valuerange">
        <property name="active" type="string">active</property>
        <property name="inactive" type="string">inactive</property>
    </property>
    <property name="script_id" type="string">system_state</property>
  </state>

  <state name="alarm">
    <property name="value" type="string"></property>
    <property name="persistent" type="boolean">true</property>
    <property name="valuerange">
        <property name="active" type="string">active</property>
        <property name="inactive" type="string">inactive</property>
    </property>
    <property name="script_id" type="string">system_state</property>
  </state>

  <state name="hibernation">
    <property name="value" type="string"></property>
    <property name="persistent" type="boolean">true</property>
    <property name="valuerange">
        <property name="awake" type="string">awake</property>
        <property name="sleeping" type="string">sleeping</property>
    </property>
    <property name="script_id" type="string">system_state</property>
  </state>

</subscriptions>
