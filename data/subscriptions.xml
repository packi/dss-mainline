<?xml version="1.0"?>
<subscriptions version="1">

  <!-- EMail event handling --> 
  <subscription event-name="sendmail" handler-name="sendmail">
  </subscription>

  <subscription event-name="buttonClick" handler-name="system_trigger">
  </subscription>

  <subscription event-name="deviceSensorEvent" handler-name="system_trigger">
  </subscription>

  <subscription event-name="deviceBinaryInputEvent" handler-name="system_trigger">
  </subscription>

  <subscription event-name="callScene" handler-name="system_trigger">
  </subscription>

  <subscription event-name="callSceneBus" handler-name="system_trigger">
  </subscription>

  <subscription event-name="undoScene" handler-name="system_trigger">
  </subscription>

  <subscription event-name="stateChange" handler-name="system_trigger">
  </subscription>

  <subscription event-name="addonStateChange" handler-name="system_trigger">
  </subscription>

  <subscription event-name="action_execute" handler-name="action_execute">
  </subscription>

  <subscription event-name="highlevelevent" handler-name="highlevelevent">
  </subscription>

  <subscription event-name="executionDenied" handler-name="execution_denied_digest">
  </subscription>
  <subscription event-name="execution_denied_digest_check" handler-name="execution_denied_digest">
  </subscription>

  <!-- Cloud notification -->
  <subscription event-name="apartmentModelChanged" handler-name="apartment_model_change">
  </subscription>
  <subscription event-name="userDefinedActionChanged" handler-name="apartment_model_change">
  </subscription>
  <subscription event-name="timedEventChanged" handler-name="apartment_model_change">
  </subscription>


  <!-- Examples -->
  <!--
  <subscription event-name="callScene" handler-name="raise_event">
    <parameter>
      <parameter name="event_name">bell</parameter>
    </parameter>
    <filter match="all">
      <property-filter type="matches" value="73" property="sceneID" />
    </filter>
  </subscription>
  <subscription event-name="callScene" handler-name="raise_event">
    <parameter>
      <parameter name="event_name">alarm</parameter>
    </parameter>
    <filter match="all">
      <property-filter type="matches" value="74" property="sceneID" />
    </filter>
  </subscription>
  <subscription event-name="callScene" handler-name="raise_event">
    <parameter>
      <parameter name="event_name">panic</parameter>
    </parameter>
    <filter match="all">
      <property-filter type="matches" value="65" property="sceneID" />
    </filter>
  </subscription>
  <subscription event-name="phonecall" handler-name="raise_event">
    <parameter>
      <parameter name="event_name">bell</parameter>
    </parameter>
    <filter match="all">
      <property-filter type="exists" property="phonenumber" />
      <property-filter type="matches" value="0123456789" property="source" />
    </filter>
  </subscription>
  -->

  <!-- Sunrise/Sunset calculation script -->
  <subscription event-name="running" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/solar_computer.js</parameter>
      <parameter name="script_id">solar_computer</parameter>
    </parameter>
  </subscription>
  <subscription event-name="solar_computer.update" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/solar_computer.js</parameter>
      <parameter name="script_id">solar_computer</parameter>
    </parameter>
  </subscription>
  <subscription event-name="solar_computer.state_change" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/solar_computer.js</parameter>
      <parameter name="script_id">solar_computer</parameter>
    </parameter>
  </subscription>

  <!-- System State/Event Handler -->
  <subscription event-name="model_ready" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/system_events.js</parameter>
      <parameter name="filename2">scripts/system_state.js</parameter>
      <parameter name="script_id">system_state</parameter>
    </parameter>
  </subscription>
  <subscription event-name="running" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/system_state.js</parameter>
      <parameter name="script_id">system_state</parameter>
    </parameter>
  </subscription>
  <subscription event-name="callScene" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/system_events.js</parameter>
      <parameter name="filename2">scripts/system_state.js</parameter>
      <parameter name="script_id">system_state</parameter>
    </parameter>
  </subscription>
  <subscription event-name="undoScene" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/system_events.js</parameter>
      <parameter name="filename2">scripts/system_state.js</parameter>
      <parameter name="script_id">system_state</parameter>
    </parameter>
  </subscription>
  <subscription event-name="blink" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/system_events.js</parameter>
      <parameter name="script_id">system_state</parameter>
    </parameter>
  </subscription>
  <subscription event-name="deviceBinaryInputEvent" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/system_events.js</parameter>
      <parameter name="filename2">scripts/system_state.js</parameter>
      <parameter name="script_id">system_state</parameter>
    </parameter>
  </subscription>
  <subscription event-name="buttonClick" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/system_events.js</parameter>
      <parameter name="script_id">system_state</parameter>
    </parameter>
  </subscription>
  <subscription event-name="deviceSensorEvent" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/system_events.js</parameter>
      <parameter name="script_id">system_state</parameter>
    </parameter>
  </subscription>
  <subscription event-name="deviceSensorValue" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/system_events.js</parameter>
      <parameter name="script_id">system_state</parameter>
    </parameter>
  </subscription>
  <subscription event-name="stateChange" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/system_events.js</parameter>
      <parameter name="filename2">scripts/system_state.js</parameter>
      <parameter name="script_id">system_state</parameter>
    </parameter>
  </subscription>
  <subscription event-name="addonStateChange" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/system_events.js</parameter>
      <parameter name="script_id">system_state</parameter>
    </parameter>
  </subscription>

  <!-- System Hail Handler -->
  <subscription event-name="running" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/system_register_trigger.js</parameter>
      <parameter name="filename2">scripts/system_hail.js</parameter>
      <parameter name="script_id">system_hail</parameter>
    </parameter>
  </subscription>
  <subscription event-name="system.hail.config" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/system_register_trigger.js</parameter>
      <parameter name="filename2">scripts/system_hail.js</parameter>
      <parameter name="script_id">system_hail</parameter>
    </parameter>
  </subscription>
  <subscription event-name="system.hail.state" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/system_hail.js</parameter>
      <parameter name="script_id">system_hail</parameter>
    </parameter>
  </subscription>
  <subscription event-name="callScene" handler-name="javascript">
    <parameter>
      <parameter name="filename1">scripts/system_hail.js</parameter>
      <parameter name="script_id">system_hail</parameter>
      <filter match="all">
        <property-filter type="matches" value="90" property="sceneID" />
        <property-filter type="matches" value="91" property="sceneID" />
      </filter>
    </parameter>
  </subscription>

  <!-- State Definitions -->
  <state name="presence">
    <property name="value" type="string"></property>
    <property name="persistent" type="boolean">true</property>
    <property name="valuerange">
        <property name="absent" type="string">absent</property>
        <property name="present" type="string">present</property>
    </property>
    <property name="script_id" type="string">system_state</property>
  </state>

  <state name="hibernation">
    <property name="value" type="string"></property>
    <property name="persistent" type="boolean">true</property>
    <property name="valuerange">
        <property name="awake" type="string">awake</property>
        <property name="sleeping" type="string">sleeping</property>
    </property>
    <property name="script_id" type="string">system_state</property>
  </state>

  <state name="daynight">
    <property name="value" type="boolean">false</property>
    <property name="script_id" type="string">solar_computer</property>
  </state>

  <state name="twilight">
    <property name="value" type="boolean">false</property>
    <property name="script_id" type="string">solar_computer</property>
  </state>

  <state name="daylight">
    <property name="value" type="boolean">false</property>
    <property name="script_id" type="string">solar_computer</property>
  </state>

</subscriptions>
